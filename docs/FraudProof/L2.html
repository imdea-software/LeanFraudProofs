<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href=".././style.css"></link><link rel="icon" href=".././favicon.svg"></link><link rel="mask-icon" href=".././favicon.svg" color="#000000"></link><link rel="prefetch" href=".././/declarations/declaration-data.bmp" as="image"></link><title>FraudProof.L2</title><script defer="true" src=".././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT=".././";</script><script>const MODULE_NAME="FraudProof.L2";</script><script type="module" src=".././jump-src.js"></script><script type="module" src=".././search.js"></script><script type="module" src=".././expand-nav.js"></script><script type="module" src=".././how-about.js"></script><script type="module" src=".././instances.js"></script><script type="module" src=".././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">FraudProof</span>.<span class="name">L2</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href=".././Init.html">Init</a></li><li><a href=".././FraudProof/DataStructures/BTree.html">FraudProof.DataStructures.BTree</a></li><li><a href=".././FraudProof/DataStructures/Hash.html">FraudProof.DataStructures.Hash</a></li><li><a href=".././FraudProof/DataStructures/MTree.html">FraudProof.DataStructures.MTree</a></li><li><a href=".././FraudProof/DataStructures/Sequence.html">FraudProof.DataStructures.Sequence</a></li><li><a href=".././FraudProof/DataStructures/TreeAccess.html">FraudProof.DataStructures.TreeAccess</a></li><li><a href=".././FraudProof/Games/ElemInTree.html">FraudProof.Games.ElemInTree</a></li><li><a href=".././FraudProof/Games/FromBtoMTree.html">FraudProof.Games.FromBtoMTree</a></li><li><a href=".././FraudProof/Games/GameDef.html">FraudProof.Games.GameDef</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-FraudProof.L2" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#P1_Actions"><span class="name">P1_Actions</span></a></div><div class="nav_link"><a class="break_within" href="#Local_valid"><span class="name">Local_valid</span></a></div><div class="nav_link"><a class="break_within" href="#Valid_Seq"><span class="name">Valid_Seq</span></a></div><div class="nav_link"><a class="break_within" href="#local_valid"><span class="name">local_valid</span></a></div><div class="nav_link"><a class="break_within" href="#struct_and_iff_valid"><span class="name">struct_and_iff_valid</span></a></div><div class="nav_link"><a class="break_within" href="#P2_Actions"><span class="name">P2_Actions</span></a></div><div class="nav_link"><a class="break_within" href="#inner_l2_actions"><span class="name">inner_l2_actions</span></a></div><div class="nav_link"><a class="break_within" href="#linear_l2_protocol"><span class="name">linear_l2_protocol</span></a></div><div class="nav_link"><a class="break_within" href="#IH"><span class="name">IH</span></a></div><div class="nav_link"><a class="break_within" href="#Witness"><span class="name">Witness</span></a></div><div class="nav_link"><a class="break_within" href="#find_left_invalid_path"><span class="name">find_left_invalid_path</span></a></div><div class="nav_link"><a class="break_within" href="#find_valid_nothing"><span class="name">find_valid_nothing</span></a></div><div class="nav_link"><a class="break_within" href="#find_nothing_is_valid"><span class="name">find_nothing_is_valid</span></a></div><div class="nav_link"><a class="break_within" href="#find_invalid_path_accessed"><span class="name">find_invalid_path_accessed</span></a></div><div class="nav_link"><a class="break_within" href="#generate_merkle_tree"><span class="name">generate_merkle_tree</span></a></div><div class="nav_link"><a class="break_within" href="#gen_chooser_opt'"><span class="name">gen_chooser_opt'</span></a></div><div class="nav_link"><a class="break_within" href="#honest_chooser"><span class="name">honest_chooser</span></a></div><div class="nav_link"><a class="break_within" href="#const_comp"><span class="name">const_comp</span></a></div><div class="nav_link"><a class="break_within" href="#gen_chooser_opt_some"><span class="name">gen_chooser_opt_some</span></a></div><div class="nav_link"><a class="break_within" href="#fold_getI_hash"><span class="name">fold_getI_hash</span></a></div><div class="nav_link"><a class="break_within" href="#honest_chooser_wins"><span class="name">honest_chooser_wins</span></a></div><div class="nav_link"><a class="break_within" href="#honest_chooser_accepts_valid"><span class="name">honest_chooser_accepts_valid</span></a></div><div class="nav_link"><a class="break_within" href="#inner_honest_valid_dac_wrong"><span class="name">inner_honest_valid_dac_wrong</span></a></div><div class="nav_link"><a class="break_within" href="#inner_honest_valid"><span class="name">inner_honest_valid</span></a></div><div class="nav_link"><a class="break_within" href="#honest_chooser_valid_local_valid"><span class="name">honest_chooser_valid_local_valid</span></a></div><div class="nav_link"><a class="break_within" href="#honest_chooser_valid"><span class="name">honest_chooser_valid</span></a></div></nav><main>
<div class="mod_doc"><h1 class="markdown-heading" id="Arranger-Block-Validity-Fraud-Proofs">Arranger Block Validity Fraud Proofs <a class="hover-link" href="#Arranger-Block-Validity-Fraud-Proofs">#</a></h1><p>We explore a simple protocol with two kind of players: One proposing blocks and
the other just challenging.</p><p>The main goal is to prove that when we have an honest challenger challenging
only /good/ blocks are accepted: See <code><a href=".././FraudProof/L2.html#honest_chooser_valid">honest_chooser_valid</a></code></p></div><div class="mod_doc"><h2 class="markdown-heading" id="Player-One-Proposer">Player One (Proposer) <a class="hover-link" href="#Player-One-Proposer">#</a></h2><p>Player one, the player proposing elements, actions are
to propose a new block <code><a href=".././FraudProof/L2.html#P1_Actions.da">da</a> : <a href=".././FraudProof/DataStructures/BTree.html#BTree">BTree</a> α × ℍ</code>.
Since we do not have IO, upon propsing a new block, they player also provides
all possible strategies for all elements.</p></div><div class="decl" id="P1_Actions"><div class="structure"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L29-L33">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#P1_Actions"><span class="name">P1_Actions</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="P1_Actions.mk"><li id="P1_Actions.da" class="structure_field"><div class="structure_field_info">da : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree">BTree</a> <span class="fn">α</span></span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span></div></li><li id="P1_Actions.dac_str" class="structure_field"><div class="structure_field_info">dac_str : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#ABTree">ABTree</a> <span class="fn">(<a href=".././Init/Prelude.html#Option">Option</a> <span class="fn">α</span>)</span> <span class="fn">(<a href=".././Init/Prelude.html#Option">Option</a> (<span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span>))</span></span></div></li><li id="P1_Actions.gen_elem_str" class="structure_field"><div class="structure_field_info">gen_elem_str<span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">n</span> : <a href=".././Init/Prelude.html#Nat">ℕ</a>}</span></span>
</span> : <span class="fn"><span class="fn"><a href=".././FraudProof/DataStructures/MTree.html#ISkeleton">ISkeleton</a> <span class="fn">n</span></span> → <span class="fn"><a href=".././FraudProof/DataStructures/Sequence.html#Sequence">Sequence</a> <span class="fn">n</span> <span class="fn">(<a href=".././Init/Prelude.html#Option">Option</a> (<span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span>))</span></span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn"><a href=".././Init/Prelude.html#Option">Option</a> <span class="fn">α</span></span></span></div></li></ul><details id="instances-for-list-P1_Actions" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><h2 class="markdown-heading" id="Local-Validity">Local Validity <a class="hover-link" href="#Local-Validity">#</a></h2><p>We define a local valid block <code><a href=".././FraudProof/L2.html#Local_valid">Local_valid</a></code> to a block that hashes to a
given hash, holds only valid elements and has no duplicates.</p></div><div class="decl" id="Local_valid"><div class="structure"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L54-L59">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#Local_valid"><span class="name">Local_valid</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#DecidableEq">DecidableEq</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#Hash">Hash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#HashMagma">HashMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">data</span> : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree">BTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">mk</span> : <span class="fn">ℍ</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">val_fun</span> : <span class="fn"><span class="fn">α</span> → <a href=".././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././foundational_types.html">Prop</a></div></div><ul class="structure_fields" id="Local_valid.mk"><li id="Local_valid.MkTree" class="structure_field"><div class="structure_field_info">MkTree : <span class="fn"><span class="fn">data</span>.<a href=".././FraudProof/DataStructures/MTree.html#BTree.hash_BTree">hash_BTree</a></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">mk</span></div></li><li id="Local_valid.ValidElems" class="structure_field"><div class="structure_field_info">ValidElems : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree.fold">BTree.fold</a> <span class="fn">val_fun</span> <a href=".././Init/Prelude.html#Bool.and">and</a> <span class="fn">data</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Init/Prelude.html#Bool.true">true</a></div></li><li id="Local_valid.NoDup" class="structure_field"><div class="structure_field_info">NoDup : <span class="fn"><span class="fn"><span class="fn">data</span>.<a href=".././FraudProof/DataStructures/BTree.html#BTree.toList">toList</a></span>.<a href=".././Init/Data/List/Basic.html#List.Nodup">Nodup</a></span></div></li></ul><details id="instances-for-list-Local_valid" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><p>Helper function building a complete tree from a sequence of <code>2^lgn</code>
elements.</p></div><div class="decl" id="Valid_Seq"><div class="def"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L63-L66">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#Valid_Seq"><span class="name">Valid_Seq</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">lgn</span> : <a href=".././Init/Prelude.html#Nat">ℕ</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#DecidableEq">DecidableEq</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#Hash">Hash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#HashMagma">HashMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">data</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Sequence.html#Sequence">Sequence</a> (<span class="fn">2</span> <a href=".././Init/Prelude.html#HPow.hPow">^</a> <span class="fn">lgn</span>) <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">merkle_tree</span> : <span class="fn">ℍ</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">P</span> : <span class="fn"><span class="fn">α</span> → <a href=".././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././foundational_types.html">Prop</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href=".././FraudProof/L2.html#Valid_Seq">Valid_Seq</a> <span class="fn">data</span> <span class="fn">merkle_tree</span> <span class="fn">P</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././FraudProof/L2.html#Local_valid">Local_valid</a> <span class="fn">(<a href=".././FraudProof/DataStructures/SeqBTree.html#perfectSeqLeaves">perfectSeqLeaves</a> <span class="fn">data</span>)</span> <span class="fn">merkle_tree</span> <span class="fn">P</span></span></li></ul></details><details id="instances-for-list-Valid_Seq" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><p>Same as <code><a href=".././FraudProof/L2.html#Local_valid">Local_valid</a></code> but instead of having a struct, we just
have a <code>Prop</code>.</p></div><div class="decl" id="local_valid"><div class="def"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L70-L77">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#local_valid"><span class="name">local_valid</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#DecidableEq">DecidableEq</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#Hash">Hash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#HashMagma">HashMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">da</span> : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree">BTree</a> <span class="fn">α</span></span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">val_fun</span> : <span class="fn"><span class="fn">α</span> → <a href=".././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././foundational_types.html">Prop</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href=".././FraudProof/L2.html#local_valid">local_valid</a> <span class="fn">da</span> <span class="fn">val_fun</span></span> <a href=".././Init/Prelude.html#Eq">=</a> (<span class="fn"><span class="fn"><span class="fn">da</span>.1</span>.<a href=".././FraudProof/DataStructures/MTree.html#BTree.hash_BTree">hash_BTree</a></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">da</span>.2</span> <a href=".././Init/Prelude.html#And">∧</a> <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree.fold">BTree.fold</a> <span class="fn">val_fun</span> <a href=".././Init/Prelude.html#Bool.and">and</a> <span class="fn"><span class="fn">da</span>.1</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Init/Prelude.html#Bool.true">true</a> <a href=".././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn"><span class="fn"><span class="fn">da</span>.1</span>.<a href=".././FraudProof/DataStructures/BTree.html#BTree.toList">toList</a></span>.<a href=".././Init/Data/List/Basic.html#List.Nodup">Nodup</a></span>)</li></ul></details><details id="instances-for-list-local_valid" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="struct_and_iff_valid"><div class="theorem"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L79-L94">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#struct_and_iff_valid"><span class="name">struct_and_iff_valid</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#DecidableEq">DecidableEq</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#Hash">Hash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#HashMagma">HashMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">data</span> : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree">BTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">mk</span> : <span class="fn">ℍ</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">val_fun</span> : <span class="fn"><span class="fn">α</span> → <a href=".././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././FraudProof/L2.html#Local_valid">Local_valid</a> <span class="fn">data</span> <span class="fn">mk</span> <span class="fn">val_fun</span></span> <a href=".././Init/Core.html#Iff">↔</a> <span class="fn"><a href=".././FraudProof/L2.html#local_valid">local_valid</a> <a href=".././Init/Prelude.html#Prod.mk">(</a><span class="fn">data</span><a href=".././Init/Prelude.html#Prod.mk">,</a> <span class="fn">mk</span><a href=".././Init/Prelude.html#Prod.mk">)</a> <span class="fn">val_fun</span></span></div></div></div></div><div class="mod_doc"><h2 class="markdown-heading" id="PLayer-2-Challenger">PLayer 2 (Challenger) <a class="hover-link" href="#PLayer-2-Challenger">#</a></h2><p>The second player, bsaed on what the player one (proposer) proposes,
can perform one of the following actions:</p><ol>
<li>DAC challenge</li>
<li>Element invalid challenge</li>
<li>Duplicate elements challenge</li>
<li>accept the block as valid</li>
</ol></div><div class="decl" id="P2_Actions"><div class="inductive"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L105-L115">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#P2_Actions"><span class="name">P2_Actions</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././foundational_types.html">Type</a></div></div><ul class="constructors"><li class="constructor" id="P2_Actions.DAC">DAC<span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">str</span> : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#ABTree">ABTree</a> <a href=".././Init/Prelude.html#Unit">Unit</a> <span class="fn">(<span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span> → <span class="fn"><a href=".././Init/Prelude.html#Option">Option</a> <a href=".././FraudProof/Games/GameDef.html#ChooserMoves">ChooserMoves</a></span>)</span></span>)</span></span>
 : <span class="fn"><a href=".././FraudProof/L2.html#P2_Actions">P2_Actions</a> <span class="fn">α</span> <span class="fn">ℍ</span></span></li><li class="constructor" id="P2_Actions.Invalid">Invalid<span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">n</span> : <a href=".././Init/Prelude.html#Nat">ℕ</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">p</span> : <span class="fn">α</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">seq</span> : <span class="fn"><a href=".././FraudProof/DataStructures/MTree.html#ISkeleton">ISkeleton</a> <span class="fn">n</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">str</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Sequence.html#Sequence">Sequence</a> <span class="fn">n</span> <span class="fn">(<span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span> → <span class="fn"><a href=".././Init/Prelude.html#Option">Option</a> <a href=".././FraudProof/Games/GameDef.html#ChooserSmp">ChooserSmp</a></span>)</span></span>)</span></span>
 : <span class="fn"><a href=".././FraudProof/L2.html#P2_Actions">P2_Actions</a> <span class="fn">α</span> <span class="fn">ℍ</span></span></li><li class="constructor" id="P2_Actions.Duplicate">Duplicate<span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">n </span><span class="fn">m</span> : <a href=".././Init/Prelude.html#Nat">ℕ</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">path_p</span> : <span class="fn"><a href=".././FraudProof/DataStructures/MTree.html#ISkeleton">ISkeleton</a> <span class="fn">n</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">path_q</span> : <span class="fn"><a href=".././FraudProof/DataStructures/MTree.html#ISkeleton">ISkeleton</a> <span class="fn">m</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">str_p</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Sequence.html#Sequence">Sequence</a> <span class="fn">n</span> <span class="fn">(<span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span> → <span class="fn"><a href=".././Init/Prelude.html#Option">Option</a> <a href=".././FraudProof/Games/GameDef.html#ChooserSmp">ChooserSmp</a></span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">str_q</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Sequence.html#Sequence">Sequence</a> <span class="fn">m</span> <span class="fn">(<span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span> → <span class="fn"><a href=".././Init/Prelude.html#Option">Option</a> <a href=".././FraudProof/Games/GameDef.html#ChooserSmp">ChooserSmp</a></span>)</span></span>)</span></span>
 : <span class="fn"><a href=".././FraudProof/L2.html#P2_Actions">P2_Actions</a> <span class="fn">α</span> <span class="fn">ℍ</span></span></li><li class="constructor" id="P2_Actions.Ok">Ok<span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span> : <span class="fn"><a href=".././FraudProof/L2.html#P2_Actions">P2_Actions</a> <span class="fn">α</span> <span class="fn">ℍ</span></span></li></ul><details id="instances-for-list-P2_Actions" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><h2 class="markdown-heading" id="L2-Local-Linear-Protocol">L2 Local Linear Protocol <a class="hover-link" href="#L2-Local-Linear-Protocol">#</a></h2><p>Simple linear protocol: no optimizations as logarithmic search.
There is no time involved: we assume players have all the time in the world to
play and there is no rush.
We assume players play to win, and we do not reason about the incentives they
have to beahve like that.
If plaer two wins, the proposed block is discarded and nothing else happens. In
the real protocol, we player one should be penalized.</p></div><div class="mod_doc"><p>Helper function defining actions taken after player one moved.</p></div><div class="decl" id="inner_l2_actions"><div class="def"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L129-L196">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#inner_l2_actions"><span class="name">inner_l2_actions</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#BEq">BEq</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#BEq">BEq</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">o</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#Hash">Hash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#HashMagma">HashMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">val_fun</span> : <span class="fn"><span class="fn">α</span> → <a href=".././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">playerOne</span> : <span class="fn"><a href=".././FraudProof/L2.html#P1_Actions">P1_Actions</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">playerTwo</span> : <span class="fn"><a href=".././FraudProof/L2.html#P2_Actions">P2_Actions</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././Init/Prelude.html#Bool">Bool</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li><li class="equation"><span class="fn"><a href=".././FraudProof/L2.html#inner_l2_actions">inner_l2_actions</a> <span class="fn">val_fun</span> <span class="fn">playerOne</span> <a href=".././FraudProof/L2.html#P2_Actions.Ok">P2_Actions.Ok</a></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Init/Prelude.html#Bool.true">true</a></li></ul></details><details id="instances-for-list-inner_l2_actions" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><p>Definition of L2 protocol playing linear games.</p></div><div class="decl" id="linear_l2_protocol"><div class="def"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L200-L209">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#linear_l2_protocol"><span class="name">linear_l2_protocol</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#BEq">BEq</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#BEq">BEq</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">o</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#Hash">Hash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#HashMagma">HashMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">val_fun</span> : <span class="fn"><span class="fn">α</span> → <a href=".././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">playerOne</span> : <span class="fn"><a href=".././FraudProof/L2.html#P1_Actions">P1_Actions</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">playerTwo</span> : <span class="fn"><span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree">BTree</a> <span class="fn">α</span></span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span> → <span class="fn"><a href=".././FraudProof/L2.html#P2_Actions">P2_Actions</a> <span class="fn">α</span> <span class="fn">ℍ</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././Init/Prelude.html#Bool">Bool</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href=".././FraudProof/L2.html#linear_l2_protocol">linear_l2_protocol</a> <span class="fn">val_fun</span> <span class="fn">playerOne</span> <span class="fn">playerTwo</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././FraudProof/L2.html#inner_l2_actions">inner_l2_actions</a> <span class="fn">val_fun</span> <span class="fn">playerOne</span> <span class="fn">(<span class="fn">playerTwo</span> <span class="fn"><span class="fn">playerOne</span>.<a href=".././FraudProof/L2.html#P1_Actions.da">da</a></span>)</span></span></li></ul></details><details id="instances-for-list-linear_l2_protocol" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><h2 class="markdown-heading" id="Crafting-Honest-Players">Crafting Honest Players. <a class="hover-link" href="#Crafting-Honest-Players">#</a></h2></div><div class="mod_doc"><h3 class="markdown-heading" id="Witness-Finding">Witness Finding. <a class="hover-link" href="#Witness-Finding">#</a></h3></div><div class="decl" id="IH"><div class="structure"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L214-L217">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#IH"><span class="name">IH</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="IH.mk"><li id="IH.side" class="structure_field"><div class="structure_field_info">side : <a href=".././FraudProof/DataStructures/MTree.html#SkElem">SkElem</a></div></li><li id="IH.spine" class="structure_field"><div class="structure_field_info">spine : <span class="fn">ℍ</span></div></li><li id="IH.sib" class="structure_field"><div class="structure_field_info">sib : <span class="fn">ℍ</span></div></li></ul><details id="instances-for-list-IH" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Witness"><div class="structure"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L219-L224">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#Witness"><span class="name">Witness</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Witness.mk"><li id="Witness.length" class="structure_field"><div class="structure_field_info">length : <a href=".././Init/Prelude.html#Nat">ℕ</a></div></li><li id="Witness.pathInfo" class="structure_field"><div class="structure_field_info">pathInfo : <span class="fn"><a href=".././FraudProof/DataStructures/Sequence.html#Sequence">Sequence</a> <span class="fn"><span class="fn">self</span>.<a href=".././FraudProof/L2.html#Witness.length">length</a></span> <span class="fn">(<a href=".././FraudProof/L2.html#IH">IH</a> <span class="fn">ℍ</span>)</span></span></div></li><li id="Witness.src" class="structure_field"><div class="structure_field_info">src : <span class="fn">α</span></div></li><li id="Witness.dst" class="structure_field"><div class="structure_field_info">dst : <span class="fn">ℍ</span></div></li></ul><details id="instances-for-list-Witness" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><p>Find leftest invalid value</p></div><div class="decl" id="find_left_invalid_path"><div class="def"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L227-L236">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#find_left_invalid_path"><span class="name">find_left_invalid_path</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">o</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#Hash">Hash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">m</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#HashMagma">HashMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">val</span> : <span class="fn"><span class="fn">α</span> → <a href=".././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree">BTree</a> <span class="fn">α</span></span> → <span class="fn"><a href=".././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href=".././FraudProof/L2.html#Witness">Witness</a> <span class="fn">α</span> <span class="fn">ℍ</span>)</span></span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li><li class="equation"><span class="fn"><a href=".././FraudProof/L2.html#find_left_invalid_path">find_left_invalid_path</a> <span class="fn">val</span> <span class="fn">(<a href=".././FraudProof/DataStructures/BTree.html#ABTree.leaf">ABTree.leaf</a> <span class="fn">a</span>)</span></span> <a href=".././Init/Prelude.html#Eq">=</a>   <a href=".././Init/Prelude.html#ite">if</a> <span class="fn"><span class="fn">val</span> <span class="fn">a</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Init/Prelude.html#Bool.true">true</a> <a href=".././Init/Prelude.html#ite">then</a> <a href=".././Init/Prelude.html#Option.none">none</a> <a href=".././Init/Prelude.html#ite">else</a> <span class="fn"><a href=".././Init/Prelude.html#Option.some">some</a> <span class="fn">{ <span class="fn">length</span> := <span class="fn">0</span>, <span class="fn">pathInfo</span> := <a href=".././FraudProof/DataStructures/Sequence.html#Sequence.nil">Sequence.nil</a>, <span class="fn">src</span> := <span class="fn">a</span>, <span class="fn">dst</span> := <span class="fn"><span class="fn"><span class="fn">o</span>.<a href=".././FraudProof/DataStructures/Hash.html#Hash.mhash">mhash</a></span> <span class="fn">a</span></span> }</span></span></li></ul></details><details id="instances-for-list-find_left_invalid_path" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="find_valid_nothing"><div class="theorem"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L238-L254">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#find_valid_nothing"><span class="name">find_valid_nothing</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">o</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#Hash">Hash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">m</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#HashMagma">HashMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">val</span> : <span class="fn"><span class="fn">α</span> → <a href=".././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree">BTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">valid</span> : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree.fold">BTree.fold</a> <span class="fn">val</span> <a href=".././Init/Prelude.html#Bool.and">and</a> <span class="fn">t</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Init/Prelude.html#Bool.true">true</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././FraudProof/L2.html#find_left_invalid_path">find_left_invalid_path</a> <span class="fn">val</span> <span class="fn">t</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Init/Prelude.html#Option.none">none</a></div></div></div></div><div class="decl" id="find_nothing_is_valid"><div class="theorem"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L256-L269">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#find_nothing_is_valid"><span class="name">find_nothing_is_valid</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">o</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#Hash">Hash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">m</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#HashMagma">HashMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">val</span> : <span class="fn"><span class="fn">α</span> → <a href=".././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree">BTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href=".././FraudProof/L2.html#find_left_invalid_path">find_left_invalid_path</a> <span class="fn">val</span> <span class="fn">t</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Init/Prelude.html#Option.none">none</a> → <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree.fold">BTree.fold</a> <span class="fn">val</span> <a href=".././Init/Prelude.html#Bool.and">and</a> <span class="fn">t</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Init/Prelude.html#Bool.true">true</a></span></div></div></div></div><div class="decl" id="find_invalid_path_accessed"><div class="theorem"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L272-L313">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#find_invalid_path_accessed"><span class="name">find_invalid_path_accessed</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">o</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#Hash">Hash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">m</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#HashMagma">HashMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">val</span> : <span class="fn"><span class="fn">α</span> → <a href=".././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">t</span> : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree">BTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">wit</span> : <span class="fn"><a href=".././FraudProof/L2.html#Witness">Witness</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href=".././FraudProof/L2.html#find_left_invalid_path">find_left_invalid_path</a> <span class="fn">val</span> <span class="fn">t</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././Init/Prelude.html#Option.some">some</a> <span class="fn">wit</span></span> →
  <span class="fn"><a href=".././FraudProof/DataStructures/TreeAccess.html#ABTree.iaccess">ABTree.iaccess</a> <span class="fn">t</span> <span class="fn">(<a href=".././FraudProof/DataStructures/Sequence.html#Sequence.map">Sequence.map</a> <span class="fn">(fun (<span class="fn">f</span> : <span class="fn"><a href=".././FraudProof/L2.html#IH">IH</a> <span class="fn">ℍ</span></span>) =&gt; <span class="fn"><span class="fn">f</span>.<a href=".././FraudProof/L2.html#IH.side">side</a></span>)</span> <span class="fn"><span class="fn">wit</span>.<a href=".././FraudProof/L2.html#Witness.pathInfo">pathInfo</a></span>)</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././Init/Prelude.html#Option.some">some</a> <span class="fn">(<a href=".././Init/Core.html#Sum.inl">Sum.inl</a> <span class="fn"><span class="fn">wit</span>.<a href=".././FraudProof/L2.html#Witness.src">src</a></span>)</span></span> <a href=".././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">val</span> <span class="fn"><span class="fn">wit</span>.<a href=".././FraudProof/L2.html#Witness.src">src</a></span></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Init/Prelude.html#Bool.false">false</a></span></div></div></div></div><div class="decl" id="generate_merkle_tree"><div class="def"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L316-L324">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#generate_merkle_tree"><span class="name">generate_merkle_tree</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">o</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#Hash">Hash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">m</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#HashMagma">HashMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">data</span> : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree">BTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#ABTree">ABTree</a> <span class="fn">α</span> <span class="fn">ℍ</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li><li class="equation"><span class="fn"><a href=".././FraudProof/L2.html#generate_merkle_tree">generate_merkle_tree</a> <span class="fn">(<a href=".././FraudProof/DataStructures/BTree.html#ABTree.leaf">ABTree.leaf</a> <span class="fn">a</span>)</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#ABTree.leaf">ABTree.leaf</a> <span class="fn">a</span></span></li></ul></details><details id="instances-for-list-generate_merkle_tree" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="gen_chooser_opt'"><div class="def"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L326-L336">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#gen_chooser_opt'"><span class="name">gen_chooser_opt'</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#BEq">BEq</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">data</span> : <span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">proposed</span> : <span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Init/Prelude.html#Option">Option</a> <a href=".././FraudProof/Games/GameDef.html#ChooserMoves">ChooserMoves</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-gen_chooser_opt'" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><p>Honest player two.
Check each condition and if the proposed block violates one, it generates a
witness and challenges the validity of such block.</p></div><div class="decl" id="honest_chooser"><div class="def"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L342-L375">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#honest_chooser"><span class="name">honest_chooser</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#DecidableEq">DecidableEq</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#BEq">BEq</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#Hash">Hash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">m</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#HashMagma">HashMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">val_fun</span> : <span class="fn"><span class="fn">α</span> → <a href=".././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">public_data</span> : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree">BTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">da_mtree</span> : <span class="fn">ℍ</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././FraudProof/L2.html#P2_Actions">P2_Actions</a> <span class="fn">α</span> <span class="fn">ℍ</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-honest_chooser" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="const_comp"><div class="theorem"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L377-L379">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#const_comp"><span class="name">const_comp</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">β </span><span class="fn">γ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn">β</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">g</span> : <span class="fn">γ</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">(fun (<span class="fn">x</span> : <span class="fn">β</span>) =&gt; <span class="fn">g</span>)</span> <a href=".././Init/Prelude.html#Function.comp">∘</a> <span class="fn">f</span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">x</span> : <span class="fn">α</span>) =&gt; <span class="fn">g</span></span></div></div></div></div><div class="decl" id="gen_chooser_opt_some"><div class="theorem"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L381-L386">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#gen_chooser_opt_some"><span class="name">gen_chooser_opt_some</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#BEq">BEq</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type">(<span class="fn">(fun (<span class="fn">fhs</span> : <span class="fn"><span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span> → <span class="fn"><a href=".././Init/Prelude.html#Option">Option</a> <a href=".././FraudProof/Games/GameDef.html#ChooserMoves">ChooserMoves</a></span></span>) (<span class="fn">x</span> : <span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span>) =&gt; <span class="fn"><span class="fn">fhs</span> <span class="fn">x</span></span>)</span> <a href=".././Init/Prelude.html#Function.comp">∘</a> <a href=".././FraudProof/Games/GenericTree.html#gen_chooser_opt">gen_chooser_opt</a>) <a href=".././Init/Prelude.html#Function.comp">∘</a> <a href=".././Init/Prelude.html#Option.some">some</a> <a href=".././Init/Prelude.html#Eq">=</a>   <span class="fn">(fun (<span class="fn">fhs</span> : <span class="fn"><span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span> → <span class="fn"><a href=".././Init/Prelude.html#Option">Option</a> <a href=".././FraudProof/Games/GameDef.html#ChooserMoves">ChooserMoves</a></span></span>) (<span class="fn">x</span> : <span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span>) =&gt; <span class="fn"><span class="fn">fhs</span> <span class="fn">x</span></span>)</span> <a href=".././Init/Prelude.html#Function.comp">∘</a> <a href=".././FraudProof/L2.html#gen_chooser_opt'">gen_chooser_opt'</a></div></div></div></div><div class="decl" id="fold_getI_hash"><div class="theorem"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L388-L397">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#fold_getI_hash"><span class="name">fold_getI_hash</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">o</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#Hash">Hash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">m</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#HashMagma">HashMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">b</span> : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#ABTree">ABTree</a> <span class="fn">α</span> <a href=".././Init/Prelude.html#Unit">Unit</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#ABTree.fold">ABTree.fold</a> <span class="fn"><span class="fn">o</span>.<a href=".././FraudProof/DataStructures/Hash.html#Hash.mhash">mhash</a></span> <span class="fn">(fun (<span class="fn">x</span> : <a href=".././Init/Prelude.html#Unit">Unit</a>) =&gt; <span class="fn"><span class="fn">m</span>.<a href=".././FraudProof/DataStructures/Hash.html#HashMagma.comb">comb</a></span>)</span> <span class="fn">b</span></span> <a href=".././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#ABTree.getI'">ABTree.getI'</a> <span class="fn"><span class="fn">o</span>.<a href=".././FraudProof/DataStructures/Hash.html#Hash.mhash">mhash</a></span> <span class="fn">(fun (<span class="fn">x</span> : <span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span>) =&gt; <span class="fn"><span class="fn"><span class="fn">m</span>.<a href=".././FraudProof/DataStructures/Hash.html#HashMagma.comb">comb</a></span> <span class="fn"><span class="fn">x</span>.1</span> <span class="fn"><span class="fn">x</span>.2</span></span>)</span> <span class="fn"><span class="fn">b</span>.<a href=".././FraudProof/DataStructures/MTree.html#ABTree.hash_SubTree">hash_SubTree</a></span></span></div></div></div></div><div class="mod_doc"><p>Honest chooser finds correct witnesses, and thus, it always wins the
challenging games (if played.)</p></div><div class="decl" id="honest_chooser_wins"><div class="theorem"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L401-L424">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#honest_chooser_wins"><span class="name">honest_chooser_wins</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#BEq">BEq</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Core.html#LawfulBEq">LawfulBEq</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">o</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#Hash">Hash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">m</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#HashMagma">HashMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">da</span> : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree">BTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././FraudProof/Games/GenericTree.html#winning_condition_player">winning_condition_player</a> <span class="fn">(fun (<span class="fn">hc</span> : <span class="fn">ℍ</span>) (<span class="fn">a</span> : <span class="fn">α</span>) (<span class="fn">h</span> : <span class="fn">ℍ</span>) =&gt; <span class="fn"><a href=".././FraudProof/Games/FromBtoMTree.html#dac_leaf_winning_condition">dac_leaf_winning_condition</a> <span class="fn">hc</span> <span class="fn">a</span> <span class="fn">h</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Init/Prelude.html#Bool.true">true</a>)</span>
  <span class="fn">(fun (<span class="fn">_x</span> : <a href=".././Init/Prelude.html#Unit">Unit</a>) (<span class="fn">x</span> : <span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span>) (<span class="fn">res</span> : <span class="fn">ℍ</span>) =&gt; <span class="fn"><a href=".././FraudProof/Games/FromBtoMTree.html#dac_node_winning_condition">dac_node_winning_condition</a> <span class="fn">res</span> <span class="fn"><span class="fn">x</span>.1</span> <span class="fn"><span class="fn">x</span>.2</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Init/Prelude.html#Bool.true">true</a>)</span> <span class="fn">(fun (<span class="fn">_x</span> : <span class="fn">ℍ</span>) =&gt; <a href=".././Init/Prelude.html#id">id</a>)</span>
  <span class="fn">{ <span class="fn">data</span> := <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#ABTree.map">ABTree.map</a> <span class="fn"><span class="fn">o</span>.<a href=".././FraudProof/DataStructures/Hash.html#Hash.mhash">mhash</a></span> <a href=".././Init/Prelude.html#id">id</a> <span class="fn">da</span></span>, <span class="fn">res</span> := <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#ABTree.fold">ABTree.fold</a> <span class="fn"><span class="fn">o</span>.<a href=".././FraudProof/DataStructures/Hash.html#Hash.mhash">mhash</a></span> <span class="fn">(fun (<span class="fn">_x</span> : <a href=".././Init/Prelude.html#Unit">Unit</a>) =&gt; <span class="fn"><span class="fn">m</span>.<a href=".././FraudProof/DataStructures/Hash.html#HashMagma.comb">comb</a></span>)</span> <span class="fn">da</span></span> }</span>
  <span class="fn">(<a href=".././FraudProof/DataStructures/BTree.html#ABTree.map">ABTree.map</a> <a href=".././Init/Prelude.html#Option.some">some</a> <a href=".././Init/Prelude.html#Option.some">some</a> <span class="fn">(<a href=".././FraudProof/DataStructures/MTree.html#ABTree.hash_SubTree">ABTree.hash_SubTree</a> <span class="fn">da</span>)</span>)</span></span></div></div></div></div><div class="mod_doc"><p>Honest player do not challenge valid blocks</p></div><div class="decl" id="honest_chooser_accepts_valid"><div class="theorem"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L426-L446">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#honest_chooser_accepts_valid"><span class="name">honest_chooser_accepts_valid</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#DecidableEq">DecidableEq</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#BEq">BEq</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Core.html#LawfulBEq">LawfulBEq</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">o</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#Hash">Hash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">m</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#HashMagma">HashMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">val_fun</span> : <span class="fn"><span class="fn">α</span> → <a href=".././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">data</span> : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree">BTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">mk</span> : <span class="fn">ℍ</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">da_valid</span> : <span class="fn"><a href=".././FraudProof/L2.html#Local_valid">Local_valid</a> <span class="fn">data</span> <span class="fn">mk</span> <span class="fn">val_fun</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././FraudProof/L2.html#honest_chooser">honest_chooser</a> <span class="fn">val_fun</span> <span class="fn">data</span> <span class="fn">mk</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././FraudProof/L2.html#P2_Actions.Ok">P2_Actions.Ok</a></div></div></div></div><div class="mod_doc"><h2 class="markdown-heading" id="L2-Protocol-and-Honest-player">L2 Protocol and Honest player <a class="hover-link" href="#L2-Protocol-and-Honest-player">#</a></h2></div><div class="decl" id="inner_honest_valid_dac_wrong"><div class="theorem"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L450-L493">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#inner_honest_valid_dac_wrong"><span class="name">inner_honest_valid_dac_wrong</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#DecidableEq">DecidableEq</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#BEq">BEq</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Core.html#LawfulBEq">LawfulBEq</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">o</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#Hash">Hash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">m</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#HashMagma">HashMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#InjectiveHash">InjectiveHash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#InjectiveMagma">InjectiveMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">val_fun</span> : <span class="fn"><span class="fn">α</span> → <a href=".././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">da</span> : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree">BTree</a> <span class="fn">α</span></span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">dac_str</span> : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#ABTree">ABTree</a> <span class="fn">(<a href=".././Init/Prelude.html#Option">Option</a> <span class="fn">α</span>)</span> <span class="fn">(<a href=".././Init/Prelude.html#Option">Option</a> (<span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span>))</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">gen_elem_str</span> : <span class="fn">{<span class="fn">n</span> : <a href=".././Init/Prelude.html#Nat">ℕ</a>} → <span class="fn"><span class="fn"><a href=".././FraudProof/DataStructures/MTree.html#ISkeleton">ISkeleton</a> <span class="fn">n</span></span> → <span class="fn"><a href=".././FraudProof/DataStructures/Sequence.html#Sequence">Sequence</a> <span class="fn">n</span> <span class="fn">(<a href=".././Init/Prelude.html#Option">Option</a> (<span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span>))</span></span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn"><a href=".././Init/Prelude.html#Option">Option</a> <span class="fn">α</span></span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">Hm</span> : (<span class="fn"><span class="fn">da</span>.2</span> <a href=".././Init/Prelude.html#BEq.beq">==</a> <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#ABTree.fold">ABTree.fold</a> <span class="fn"><span class="fn">o</span>.<a href=".././FraudProof/DataStructures/Hash.html#Hash.mhash">mhash</a></span> <span class="fn">(fun (<span class="fn">x</span> : <a href=".././Init/Prelude.html#Unit">Unit</a>) =&gt; <span class="fn"><span class="fn">m</span>.<a href=".././FraudProof/DataStructures/Hash.html#HashMagma.comb">comb</a></span>)</span> <span class="fn"><span class="fn">da</span>.1</span></span>) <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Init/Prelude.html#Bool.false">false</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">(<a href=".././FraudProof/L2.html#linear_l2_protocol">linear_l2_protocol</a> <span class="fn">val_fun</span> <span class="fn">{ <span class="fn">da</span> := <span class="fn">da</span>, <span class="fn">dac_str</span> := <span class="fn">dac_str</span>, <span class="fn">gen_elem_str</span> := <span class="fn">gen_elem_str</span> }</span> <span class="fn">fun (<span class="fn">x</span> : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree">BTree</a> <span class="fn">α</span></span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span>) =&gt;
    <span class="fn"><a href=".././FraudProof/L2.html#honest_chooser">honest_chooser</a> <span class="fn">val_fun</span> <span class="fn"><span class="fn">x</span>.1</span> <span class="fn"><span class="fn">x</span>.2</span></span></span>)</span> <a href=".././Init/Prelude.html#Eq">=</a>   <a href=".././Init/Prelude.html#Bool.false">false</a></div></div></div></div><div class="mod_doc"><p>Helper lemma, if a block is accepted by <code><a href=".././FraudProof/L2.html#linear_l2_protocol">linear_l2_protocol</a></code>, then that block is valid.</p></div><div class="decl" id="inner_honest_valid"><div class="theorem"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L497-L613">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#inner_honest_valid"><span class="name">inner_honest_valid</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#DecidableEq">DecidableEq</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#BEq">BEq</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Core.html#LawfulBEq">LawfulBEq</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">o</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#Hash">Hash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">m</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#HashMagma">HashMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#InjectiveHash">InjectiveHash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#InjectiveMagma">InjectiveMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">val_fun</span> : <span class="fn"><span class="fn">α</span> → <a href=".././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">da</span> : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree">BTree</a> <span class="fn">α</span></span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">dac_str</span> : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#ABTree">ABTree</a> <span class="fn">(<a href=".././Init/Prelude.html#Option">Option</a> <span class="fn">α</span>)</span> <span class="fn">(<a href=".././Init/Prelude.html#Option">Option</a> (<span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span>))</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">gen_elem_str</span> : <span class="fn">{<span class="fn">n</span> : <a href=".././Init/Prelude.html#Nat">ℕ</a>} → <span class="fn"><span class="fn"><a href=".././FraudProof/DataStructures/MTree.html#ISkeleton">ISkeleton</a> <span class="fn">n</span></span> → <span class="fn"><a href=".././FraudProof/DataStructures/Sequence.html#Sequence">Sequence</a> <span class="fn">n</span> <span class="fn">(<a href=".././Init/Prelude.html#Option">Option</a> (<span class="fn">ℍ</span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span>))</span></span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn"><a href=".././Init/Prelude.html#Option">Option</a> <span class="fn">α</span></span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">(<a href=".././FraudProof/L2.html#linear_l2_protocol">linear_l2_protocol</a> <span class="fn">val_fun</span> <span class="fn">{ <span class="fn">da</span> := <span class="fn">da</span>, <span class="fn">dac_str</span> := <span class="fn">dac_str</span>, <span class="fn">gen_elem_str</span> := <span class="fn">gen_elem_str</span> }</span> <span class="fn">fun (<span class="fn">x</span> : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree">BTree</a> <span class="fn">α</span></span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span>) =&gt;
      <span class="fn"><a href=".././FraudProof/L2.html#honest_chooser">honest_chooser</a> <span class="fn">val_fun</span> <span class="fn"><span class="fn">x</span>.1</span> <span class="fn"><span class="fn">x</span>.2</span></span></span>)</span> <a href=".././Init/Prelude.html#Eq">=</a>     <a href=".././Init/Prelude.html#Bool.true">true</a> →
  <span class="fn"><a href=".././FraudProof/L2.html#local_valid">local_valid</a> <span class="fn">da</span> <span class="fn">val_fun</span></span></span></div></div></div></div><div class="mod_doc"><p>Valid blocks are accepted by the <code><a href=".././FraudProof/L2.html#linear_l2_protocol">linear_l2_protocol</a></code> .</p></div><div class="decl" id="honest_chooser_valid_local_valid"><div class="theorem"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L616-L629">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#honest_chooser_valid_local_valid"><span class="name">honest_chooser_valid_local_valid</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#BEq">BEq</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Core.html#LawfulBEq">LawfulBEq</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#DecidableEq">DecidableEq</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">o</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#Hash">Hash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">m</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#HashMagma">HashMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#InjectiveHash">InjectiveHash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#InjectiveMagma">InjectiveMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">val_fun</span> : <span class="fn"><span class="fn">α</span> → <a href=".././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">p1</span> : <span class="fn"><a href=".././FraudProof/L2.html#P1_Actions">P1_Actions</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href=".././FraudProof/L2.html#local_valid">local_valid</a> <span class="fn"><span class="fn">p1</span>.<a href=".././FraudProof/L2.html#P1_Actions.da">da</a></span> <span class="fn">val_fun</span></span> →
  <span class="fn">(<a href=".././FraudProof/L2.html#linear_l2_protocol">linear_l2_protocol</a> <span class="fn">val_fun</span> <span class="fn">p1</span> <span class="fn">fun (<span class="fn">x</span> : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree">BTree</a> <span class="fn">α</span></span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span>) =&gt;
      <span class="fn">match <span class="fn">x</span> with
      | <a href=".././Init/Prelude.html#Prod.mk">(</a><span class="fn">t</span><a href=".././Init/Prelude.html#Prod.mk">,</a> <span class="fn">mt</span><a href=".././Init/Prelude.html#Prod.mk">)</a> =&gt; <span class="fn"><a href=".././FraudProof/L2.html#honest_chooser">honest_chooser</a> <span class="fn">val_fun</span> <span class="fn">t</span> <span class="fn">mt</span></span></span></span>)</span> <a href=".././Init/Prelude.html#Eq">=</a>     <a href=".././Init/Prelude.html#Bool.true">true</a></span></div></div></div></div><div class="mod_doc"><p>Main theorem, the L2 Protocol <code><a href=".././FraudProof/L2.html#linear_l2_protocol">linear_l2_protocol</a></code> accepts valid blocks and
every block accepted by the protocol is valid, when equipped with the honest
player two.</p></div><div class="decl" id="honest_chooser_valid"><div class="theorem"><div class="gh_link"><a href="https://github.com/martinceresa/leanFraudProofs/blob/0e8b2828fcaa965f22d6417dae58245b395944bf/FraudProof/L2.lean#L635-L647">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././FraudProof/L2.html#honest_chooser_valid"><span class="name">honest_chooser_valid</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α </span><span class="fn">ℍ</span> : <a href=".././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#BEq">BEq</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Core.html#LawfulBEq">LawfulBEq</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#DecidableEq">DecidableEq</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">o</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#Hash">Hash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn">m</span> : <span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#HashMagma">HashMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#InjectiveHash">InjectiveHash</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././FraudProof/DataStructures/Hash.html#InjectiveMagma">InjectiveMagma</a> <span class="fn">ℍ</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">val_fun</span> : <span class="fn"><span class="fn">α</span> → <a href=".././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">p1</span> : <span class="fn"><a href=".././FraudProof/L2.html#P1_Actions">P1_Actions</a> <span class="fn">α</span> <span class="fn">ℍ</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">(<a href=".././FraudProof/L2.html#linear_l2_protocol">linear_l2_protocol</a> <span class="fn">val_fun</span> <span class="fn">p1</span> <span class="fn">fun (<span class="fn">x</span> : <span class="fn"><a href=".././FraudProof/DataStructures/BTree.html#BTree">BTree</a> <span class="fn">α</span></span> <a href=".././Init/Prelude.html#Prod">×</a> <span class="fn">ℍ</span>) =&gt;
      <span class="fn">match <span class="fn">x</span> with
      | <a href=".././Init/Prelude.html#Prod.mk">(</a><span class="fn">t</span><a href=".././Init/Prelude.html#Prod.mk">,</a> <span class="fn">mt</span><a href=".././Init/Prelude.html#Prod.mk">)</a> =&gt; <span class="fn"><a href=".././FraudProof/L2.html#honest_chooser">honest_chooser</a> <span class="fn">val_fun</span> <span class="fn">t</span> <span class="fn">mt</span></span></span></span>)</span> <a href=".././Init/Prelude.html#Eq">=</a>     <a href=".././Init/Prelude.html#Bool.true">true</a> <a href=".././Init/Core.html#Iff">↔</a>   <span class="fn"><a href=".././FraudProof/L2.html#local_valid">local_valid</a> <span class="fn"><span class="fn">p1</span>.<a href=".././FraudProof/L2.html#P1_Actions.da">da</a></span> <span class="fn">val_fun</span></span></div></div></div></div></main>
<nav class="nav"><iframe src=".././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>